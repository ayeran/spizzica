%h1 Elenco di birre
= form_tag @beers_path, :method => 'get' do
  %p
    = text_field_tag :search, params[:search]
    = hidden_field_tag :direction, params[:direction]
    = hidden_field_tag :sort, params[:sort]
    = submit_tag "Trova", :name => nil

= sortable 'name', "Nome"
= sortable 'strength', 'Gradazione'
= sortable 'volume'
= sortable 'price', 'Prezzo'

%br
- @beers.each do |beer|
  .beercell
    .beercellimage
      = image_tag beer.imagebeer.url(:small)
      - if beer.manufacturer
        - if beer.manufacturer.country
          = image_tag beer.manufacturer.country.flagimage.url(:thumb)
    .beercellinfo
      %p
        Nome:
        = beer.name
      %p
        Gradazione:
        = sprintf("%02.1f %", beer.strength)
      %p
        Stile:
        = beer.beerstyles.map{|a| a.name}.join(" ")
      %p
        Colore:
        = beer.colors.map{|c| c.name}.join(" ")
      - if beer.container
        %p
          Contenitore:
          = beer.container.name
      %p
        Volume:
        = sprintf("%02.0f cl", beer.volume)
      %p
        Aroma:
        = beer.aromas.map{|a| a.name}.join(" ")
      %p
        Gusto:
        = beer.tastes.map{|t| t.name}.join(" ")
      %p
        Schiuma:
        = beer.foams.map{|foam| foam.name}.join(" ")
      - if !beer.description.empty?
        %p
          Descrizione:
          = beer.description
      %p
        Prezzo:
        = sprintf("%02.2f â‚¬", beer.price)
      = button_to "in carrello", line_items_path(:item_id => beer.item.id), :id=>"to_basket"
      - if user_signed_in?
        = link_to 'Mostra', beer
        = link_to 'Modifica', edit_beer_path(beer)
        = link_to 'Eliminare', beer, :method => :delete, :data => { :confirm => 'Sei sicuro di eliminare birra ' + beer.name + '?' }



= will_paginate @beers, :previous_label => "<<", :next_label => ">>"
- if user_signed_in?
  %br
  = link_to 'Nuova birra', new_beer_path
